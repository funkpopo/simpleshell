/*
 * 高性能主题切换动画
 * 使用 clip-path 圆形扩展动画实现平滑的主题过渡效果
 * GPU 加速，不影响性能
 */

/* 主题切换遮罩层 */
.theme-switch-overlay {
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9998;
  will-change: clip-path, opacity;
  opacity: 0.85;
  mix-blend-mode: normal;
}

/* 暗色主题遮罩 */
.theme-switch-overlay.dark {
  background: radial-gradient(
    circle at 100% 0%,
    #121212 0%,
    #1a1a1a 30%,
    #0d0d0d 100%
  );
}

/* 亮色主题遮罩 */
.theme-switch-overlay.light {
  background: radial-gradient(
    circle at 100% 0%,
    #f0f2f5 0%,
    #ffffff 30%,
    #e8eaed 100%
  );
}

/* 从右上角到左下角的动画效果 - 缩短至 0.5s */
@keyframes theme-switch-animation {
  0% {
    clip-path: circle(0% at 100% 0%);
    opacity: 0;
  }
  15% {
    opacity: 0.85;
  }
  85% {
    opacity: 0.85;
  }
  100% {
    clip-path: circle(200% at 100% 0%);
    opacity: 0;
  }
}

/* 激活动画时应用 */
.theme-switch-overlay.animating {
  animation: theme-switch-animation 0.5s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

/* 主题切换时的背景过渡（仅 body 自身） */
body.theme-switching {
  transition: background-color 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/*
 * 针对关键容器元素添加过渡效果（替代通配符选择器）
 * 只对主要的布局容器和可见元素应用过渡
 */
body.theme-switching .MuiPaper-root,
body.theme-switching .MuiAppBar-root,
body.theme-switching .MuiDrawer-paper,
body.theme-switching .MuiCard-root,
body.theme-switching .MuiDialog-paper,
body.theme-switching .MuiMenu-paper,
body.theme-switching .MuiToolbar-root {
  transition:
    background-color 0.4s cubic-bezier(0.4, 0.0, 0.2, 1),
    background 0.4s cubic-bezier(0.4, 0.0, 0.2, 1),
    border-color 0.4s cubic-bezier(0.4, 0.0, 0.2, 1),
    box-shadow 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* 文本颜色过渡 */
body.theme-switching .MuiTypography-root,
body.theme-switching .MuiListItemText-root,
body.theme-switching .MuiButton-root,
body.theme-switching .MuiIconButton-root {
  transition: color 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* 图标颜色过渡 */
body.theme-switching .MuiSvgIcon-root {
  transition: fill 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* 为按钮添加点击动画效果 */
.theme-button-pulse {
  animation: pulse-animation 0.3s ease-out;
}

@keyframes pulse-animation {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.92);
  }
  100% {
    transform: scale(1);
  }
}

/* 使用 GPU 加速优化性能 */
.theme-switch-overlay,
.theme-button-pulse {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* 确保遮罩不会干扰用户交互 */
.theme-switch-overlay {
  user-select: none;
  -webkit-user-select: none;
}
