/*
 * 高性能主题切换动画
 * 使用 mix-blend-mode 和半透明遮罩实现融入界面的颜色切换效果
 * GPU 加速，不影响性能，不遮挡界面元素
 */

/* 主题切换遮罩层 */
.theme-switch-overlay {
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9998; /* 低于顶部通知和对话框 */
  will-change: clip-path, opacity;
  opacity: 0.85; /* 半透明，让下面的内容可见 */
  mix-blend-mode: normal;
}

/* 暗色主题遮罩 */
.theme-switch-overlay.dark {
  background: radial-gradient(
    circle at 100% 0%,
    #121212 0%,
    #1a1a1a 30%,
    #0d0d0d 100%
  );
}

/* 亮色主题遮罩 */
.theme-switch-overlay.light {
  background: radial-gradient(
    circle at 100% 0%,
    #f0f2f5 0%,
    #ffffff 30%,
    #e8eaed 100%
  );
}

/* 从右上角到左下角的动画效果 */
@keyframes theme-switch-animation {
  0% {
    clip-path: circle(0% at 100% 0%);
    opacity: 0;
  }
  10% {
    opacity: 0.85;
  }
  90% {
    opacity: 0.85;
  }
  100% {
    clip-path: circle(200% at 100% 0%);
    opacity: 0;
  }
}

/* 激活动画时应用 */
.theme-switch-overlay.animating {
  animation: theme-switch-animation 0.8s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

/* 在动画期间添加柔和的过渡效果 */
body.theme-switching {
  transition: background-color 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
}

body.theme-switching * {
  transition:
    background-color 0.8s cubic-bezier(0.4, 0.0, 0.2, 1),
    background 0.8s cubic-bezier(0.4, 0.0, 0.2, 1),
    color 0.8s cubic-bezier(0.4, 0.0, 0.2, 1),
    border-color 0.8s cubic-bezier(0.4, 0.0, 0.2, 1),
    box-shadow 0.8s cubic-bezier(0.4, 0.0, 0.2, 1),
    fill 0.8s cubic-bezier(0.4, 0.0, 0.2, 1),
    stroke 0.8s cubic-bezier(0.4, 0.0, 0.2, 1) !important;
}

/* 为按钮添加点击动画效果 */
.theme-button-pulse {
  animation: pulse-animation 0.3s ease-out;
}

@keyframes pulse-animation {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.92);
  }
  100% {
    transform: scale(1);
  }
}

/* 使用 GPU 加速优化性能 */
.theme-switch-overlay,
.theme-button-pulse {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* 确保遮罩不会干扰用户交互 */
.theme-switch-overlay {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
